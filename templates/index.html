<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>PÃ¡gina Principal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/colors.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <div class="header">
        <h1>Bem-vindo ao C3 bank</h1>
        
        <a href="{{ url_for('logout') }}">Sair</a>
    </div>
    <div class="container">
        <div class="infos">
            <p>OlÃ¡, {{ user.username }}!</p>

            <h2>Dados da Conta</h2>
            {% if account %}
                <ul>
                    <li>NÃºmero da conta: {{ account.id }}</li>
                    <li>Saldo: R$ {{ "%.2f"|format(account.balance) }}</li>
                    <li>Criada em: {{ account.create_at.strftime("%d/%m/%Y %H:%M") }}</li>
                </ul>
            {% else %}
                <p>Conta nÃ£o encontrada.</p>
            {% endif %}
        </div>

        <div class="statement">
            
            <h2>ðŸ“„ Extrato</h2>
            {% if transactions %}
                <ul>
                {% for t in transactions %}
                    <li>
                        {% if t.type == 'deposit' and t.target_account == account.id %}
                            <strong>DepÃ³sito</strong> â€” R$ {{ "%.2f"|format(t.amount) }}
                        {% elif t.type == 'withdraw' and t.source_account == account.id %}
                            <strong>Saque</strong> â€” R$ {{ "%.2f"|format(t.amount) }}
                        {% elif t.type == 'transfer' %}
                            {% if t.source_account == account.id %}
                                <strong>TransferÃªncia enviada</strong> â€” R$ {{ "%.2f"|format(t.amount) }} para {{ t.target_account }}
                            {% elif t.target_account == account.id %}
                                <strong>TransferÃªncia recebida</strong> â€” R$ {{ "%.2f"|format(t.amount) }} de {{ t.source_account }}
                            {% endif %}
                        {% endif %}
                        <br><small>{{ t.created_at.strftime("%d/%m/%Y %H:%M") }}</small>
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <p>Nenhuma transaÃ§Ã£o encontrada.</p>
            {% endif %}

            <button type="button" onclick="location.href='{{ url_for('transfer') }}'">
                Fazer transferÃªncia
            </button>
        </div>
        
    </div>
</body>
</html>
